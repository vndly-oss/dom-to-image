/*! dom-to-image 04-06-2018 */
!function(e){"use strict";var p=function(){return{escape:function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:o,mimeType:function(e){var t=o(e).toLowerCase();return(n="application/font-woff",r="image/jpeg",{woff:n,woff2:n,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:r,jpeg:r,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[t]||"";var n,r},dataAsUrl:function(e,t){return"data:"+t+";base64,"+e},isDataUrl:function(e){return-1!==e.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise(function(e){t.toBlob(e)}):(i=t,new Promise(function(e){for(var t=window.atob(i.toDataURL().split(",")[1]),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);e(new Blob([r],{type:"image/png"}))}));var i},resolveUrl:function(e,t){var n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);var o=n.createElement("a");return n.body.appendChild(o),r.href=t,o.href=e,o.href},getAndEncode:function(i){u.impl.options.cacheBust&&(i+=(/\?/.test(i)?"&":"?")+(new Date).getTime());return new Promise(function(n){var e,r=new XMLHttpRequest;if(r.onreadystatechange=function(){if(4!==r.readyState)return;if(200!==r.status)return void(e?n(e):o("cannot fetch resource: "+i+", status: "+r.status));var t=new FileReader;t.onloadend=function(){var e=t.result.split(/,/)[1];n(e)},t.readAsDataURL(r.response)},r.ontimeout=function(){e?n(e):o("timeout of 30000ms occured while fetching resource: "+i)},r.responseType="blob",r.timeout=3e4,r.open("GET",i,!0),r.send(),u.impl.options.imagePlaceholder){var t=u.impl.options.imagePlaceholder.split(/,/);t&&t[1]&&(e=t[1])}function o(e){console.error(e),n("")}})},uid:(e=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+e++}),delay:function(n){return function(t){return new Promise(function(e){setTimeout(function(){e(t)},n)})}},asArray:function(e){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t},escapeXhtml:function(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src=r})},width:function(e){var t=r(e,"border-left-width"),n=r(e,"border-right-width");return e.scrollWidth+t+n},height:function(e){var t=r(e,"border-top-width"),n=r(e,"border-bottom-width");return e.scrollHeight+t+n}};var e;function o(e){var t=/\.([^\.\/]*?)$/g.exec(e);return t?t[1]:""}function r(e,t){var n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}}(),i=function(){var r=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,r,o){return e(t)?Promise.resolve(t).then(n).then(function(e){var n=Promise.resolve(t);return e.forEach(function(t){n=n.then(function(e){return i(e,t,r,o)})}),n}):Promise.resolve(t)},shouldProcess:e,impl:{readUrls:n,inline:i}};function e(e){return-1!==e.search(r)}function n(e){for(var t,n=[];null!==(t=r.exec(e));)n.push(t[1]);return n.filter(function(e){return!p.isDataUrl(e)})}function i(n,r,t,e){return Promise.resolve(r).then(function(e){return t?p.resolveUrl(e,t):e}).then(e||p.getAndEncode).then(function(e){return p.dataAsUrl(e,p.mimeType(r))}).then(function(e){return n.replace((t=r,new RegExp("(url\\(['\"]?)("+p.escape(t)+")(['\"]?\\))","g")),"$1"+e+"$3");var t})}}(),t=function(){return{resolveAll:function(){return e(document).then(function(e){return Promise.all(e.map(function(e){return e.resolve()}))}).then(function(e){return e.join("\n")})},impl:{readAll:e}};function e(){return Promise.resolve(p.asArray(document.styleSheets)).then(function(e){var n=[];return e.forEach(function(t){try{p.asArray(t.cssRules||[]).forEach(n.push.bind(n))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}}),n}).then(function(e){return e.filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).filter(function(e){return i.shouldProcess(e.style.getPropertyValue("src"))})}).then(function(e){return e.map(t)});function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return i.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),n=function(){return{inlineAll:function t(e){if(!(e instanceof Element))return Promise.resolve(e);return(n=e,r=n.style.getPropertyValue("background"),r?i.inlineAll(r).then(function(e){n.style.setProperty("background",e,n.style.getPropertyPriority("background"))}).then(function(){return n}):Promise.resolve(n)).then(function(){return e instanceof HTMLImageElement?o(e).inline():Promise.all(p.asArray(e.childNodes).map(function(e){return t(e)}))});var n,r},impl:{newImage:o}};function o(r){return{inline:function(e){return p.isDataUrl(r.src)?Promise.resolve():Promise.resolve(r.src).then(e||p.getAndEncode).then(function(e){return p.dataAsUrl(e,p.mimeType(r.src))}).then(function(n){return new Promise(function(e,t){r.onload=e,r.onerror=t,r.src=n})})}}}}(),r={imagePlaceholder:void 0,cacheBust:!1},u={toSvg:o,toPng:function(e,t){return a(e,t||{}).then(function(e){return e.toDataURL()})},toJpeg:function(e,t){return a(e,t=t||{}).then(function(e){return e.toDataURL("image/jpeg",t.quality||1)})},toBlob:function(e,t){return a(e,t||{}).then(p.canvasToBlob)},toPixelData:function(t,e){return a(t,e||{}).then(function(e){return e.getContext("2d").getImageData(0,0,p.width(t),p.height(t)).data})},impl:{fontFaces:t,images:n,util:p,inliner:i,options:{}}};function o(o,i){return function(e){void 0===e.imagePlaceholder?u.impl.options.imagePlaceholder=r.imagePlaceholder:u.impl.options.imagePlaceholder=e.imagePlaceholder;void 0===e.cacheBust?u.impl.options.cacheBust=r.cacheBust:u.impl.options.cacheBust=e.cacheBust}(i=i||{}),Promise.resolve(o).then(function(e){return function(c,s,e){if(!e&&s&&!s(c))return Promise.resolve();return Promise.resolve(c).then(function(e){return e instanceof HTMLCanvasElement?p.makeImage(e.toDataURL()):e.cloneNode(!1)}).then(function(e){return t=e,n=s,0===(r=c.childNodes).length?Promise.resolve(t):(o=t,i=p.asArray(r),u=n,a=Promise.resolve(),i.forEach(function(e){a=a.then(function(){return l(e,u)}).then(function(e){e&&o.appendChild(e)})}),a).then(function(){return t});var t,n,r,o,i,u,a}).then(function(e){return f=c,(h=e)instanceof Element?Promise.resolve().then(function(){var e,t,n,r;e=window.getComputedStyle(f),(t=h.style).fontStretch,e.cssText?t.cssText=e.cssText:(n=e,r=t,p.asArray(n).forEach(function(e){r.setProperty(e,n.getPropertyValue(e),n.getPropertyPriority(e))})),t.fontStretch="normal"}).then(function(){[":before",":after"].forEach(function(e){!function(e){var t=window.getComputedStyle(f,e),n=t.getPropertyValue("content");if(""!==n&&"none"!==n){var r=p.uid();h.className=h.className+" "+r;var o,i,u,a,c,s,l=document.createElement("style");l.appendChild((i="."+r+":"+e,u=(o=t).cssText?(s=(c=o).getPropertyValue("content"),c.cssText+" content: "+s+";"):(a=o,p.asArray(a).map(function(e){return e+": "+a.getPropertyValue(e)+(a.getPropertyPriority(e)?" !important":"")}).join("; ")+";"),document.createTextNode(i+"{"+u+"}"))),h.appendChild(l)}}(e)})}).then(function(){f instanceof HTMLTextAreaElement&&(h.innerHTML=f.value),f instanceof HTMLInputElement&&h.setAttribute("value",f.value)}).then(function(){h instanceof SVGElement&&(h.setAttribute("xmlns","http://www.w3.org/2000/svg"),h instanceof SVGRectElement&&["width","height"].forEach(function(e){var t=h.getAttribute(e);t&&h.style.setProperty(e,t)}))}).then(function(){return h}):h;var f,h})}(e,i.filter,!0)}).then(c).then(function(t){i.bgcolor&&(t.style.backgroundColor=i.bgcolor);i.width&&(t.style.width=i.width+"px");i.height&&(t.style.height=i.height+"px");i.style&&Object.keys(i.style).forEach(function(e){t.style[e]=i.style[e]});return t}).then(function(e){return t=e,n=i.width||p.width(o),r=i.height||p.height(o),Promise.resolve(t).then(function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)}).then(p.escapeXhtml).then(function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"}).then(function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+r+'">'+e+"</svg>"}).then(function(e){return"data:image/svg+xml;charset=utf-8,"+e});var t,n,r})}function a(n,r){return o(n,r).then(p.makeImage).then(p.delay(100)).then(function(e){var t=function(e){var t=document.createElement("canvas");if(t.width=r.width||p.width(e),t.height=r.height||p.height(e),r.bgcolor){var n=t.getContext("2d");n.fillStyle=r.bgcolor,n.fillRect(0,0,t.width,t.height)}return t}(n);return t.getContext("2d").drawImage(e,0,0),t})}function l(t,n,e){if(!e&&n&&!n(t))return Promise.resolve();return Promise.resolve(t).then(r).then(function(e){return o(t,e,n)}).then(function(e){return i(t,e)});function r(e){return e instanceof HTMLCanvasElement?p.makeImage(e.toDataURL()):e.cloneNode(!1)}function o(e,t,n){var r=e.childNodes;return 0===r.length?Promise.resolve(t):function(t,e,n){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return l(e,n)}).then(function(e){e&&t.appendChild(e)})}),r}(t,p.asArray(r),n).then(function(){return t});function o(t,e,n){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return l(e,n)}).then(function(e){e&&t.appendChild(e)})}),r}}function i(m,d){return d instanceof Element?Promise.resolve().then(function(){!function(e,t){t.fontStretch,e.cssText?t.cssText=e.cssText:(n=e,r=t,p.asArray(n).forEach(function(e){r.setProperty(e,n.getPropertyValue(e),n.getPropertyPriority(e))}));var n,r;t.fontStretch="normal"}(window.getComputedStyle(m),d.style)}).then(function(){[":before",":after"].forEach(function(e){!function(e){var t=window.getComputedStyle(m,e),n=t.getPropertyValue("content");if(""===n||"none"===n)return;var r=p.uid();d.className=d.className+" "+r;var o=document.createElement("style");o.appendChild((i=r,u=e,a=t,c="."+i+":"+u,s=a.cssText?(f=a,h=f.getPropertyValue("content"),f.cssText+" content: "+h+";"):(l=a,p.asArray(l).map(function(e){return e+": "+l.getPropertyValue(e)+(l.getPropertyPriority(e)?" !important":"")}).join("; ")+";"),document.createTextNode(c+"{"+s+"}"))),d.appendChild(o);var i,u,a,c,s,l,f,h}(e)})}).then(function(){m instanceof HTMLTextAreaElement&&(d.innerHTML=m.value);m instanceof HTMLInputElement&&d.setAttribute("value",m.value)}).then(function(){if(!(d instanceof SVGElement))return;if(d.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(d instanceof SVGRectElement))return;["width","height"].forEach(function(e){var t=d.getAttribute(e);t&&d.style.setProperty(e,t)})}).then(function(){return d}):d;function e(){function e(e,t){if(t.fontStretch,e.cssText)t.cssText=e.cssText;else n(e,t);function n(t,n){p.asArray(t).forEach(function(e){n.setProperty(e,t.getPropertyValue(e),t.getPropertyPriority(e))})}t.fontStretch="normal"}e(window.getComputedStyle(m),d.style)}function t(){function t(e){var t=window.getComputedStyle(m,e),n=t.getPropertyValue("content");if(n===""||n==="none")return;var r=p.uid();d.className=d.className+" "+r;var o=document.createElement("style");function i(e,t,n){var r="."+e+":"+t,o=n.cssText?i(n):u(n);return document.createTextNode(r+"{"+o+"}");function i(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}function u(t){return p.asArray(t).map(e).join("; ")+";";function e(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}}}o.appendChild(i(r,e,t)),d.appendChild(o)}[":before",":after"].forEach(function(e){t(e)})}function n(){if(m instanceof HTMLTextAreaElement)d.innerHTML=m.value;if(m instanceof HTMLInputElement)d.setAttribute("value",m.value)}function r(){if(!(d instanceof SVGElement))return;if(d.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(d instanceof SVGRectElement))return;["width","height"].forEach(function(e){var t=d.getAttribute(e);if(!t)return;d.style.setProperty(e,t)})}}}function c(e){return n.inlineAll(e).then(function(){return e})}"undefined"!=typeof module?module.exports=u:e.domtoimage=u}(this);